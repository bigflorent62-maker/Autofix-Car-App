<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Autofix â€“ Diagnosi AI</title>
<style>
body{
  font-family: Arial, sans-serif;
  margin:0;
  background:#0f1b2d;
  color:white;
}
.hero{
  padding:80px 20px;
  text-align:center;
  background:linear-gradient(120deg,#1e3c72,#2a5298);
}
.hero h1{font-size:42px;margin-bottom:10px}
.hero p{opacity:.8}

.search{
  margin-top:30px;
}
input,button{
  padding:12px;
  border-radius:6px;
  border:none;
  font-size:16px;
}
input{width:260px}
button{
  background:#ff7a18;
  color:white;
  cursor:pointer;
}

.cards{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-top:50px;
  flex-wrap:wrap;
}

.card{
  background:#1b2b45;
  padding:25px;
  border-radius:12px;
  width:260px;
}

.result{
  margin:40px auto;
  max-width:500px;
  background:#1b2b45;
  padding:25px;
  border-radius:12px;
  display:none;
}

.loader{opacity:.6}
</style>
</head>

<body>

<div class="hero">
  <h1>Autofix AI</h1>
  <p>Diagnosi intelligente e officina migliore per il tuo problema</p>

  <div class="search">
    <input id="problem" placeholder="Descrivi il problema auto">
    <button onclick="alert('click funziona')">Analizza</button>
  </div>

  <div class="cards">
    <div class="card">
      <h3>Diagnosi AI</h3>
      <p>Capisci il problema in pochi secondi</p>
    </div>
    <div class="card">
      <h3>Officina migliore</h3>
      <p>Scelta in base al tuo guasto reale</p>
    </div>
  </div>
</div>

<div id="result" class="result"></div>

<script>
async function analyze() {
  const problem = document.getElementById("problem").value;
  const resultBox = document.getElementById("result");

  resultBox.innerHTML = "Analisi in corso...";

  try {
    const res = await fetch("https://autofix-car-app.onrender.com/ai", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ problem })
    });

    const data = await res.json();

    resultBox.innerHTML = `
      <h3>Diagnosi stimata</h3>
      <p>${data.diagnosis}</p>
      <h3>Officina consigliata</h3>
      <p>${data.workshop}</p>
      <button onclick="alert('Prenotazione demo')">Prenota</button>
    `;

  } catch (err) {
    console.error(err);
    resultBox.innerHTML = "Errore durante l'analisi.";
  }
}
</script>

<script>
console.log("JS CARICATO");
</script>

</body>
</html>
